var clients = [{
        name: 'israe moutawkil',
        number: 5665489891,
        description: 'katrina ipsum dolor sit amet , consecteur...',
        rate: 700.,
        inr1: 'INR',
        balance: 200.00,
        inr2: 'INR',
        deposit: 500.00,
        inr3: 'INR',
        status: 'active',
        chexboxing: 'unchecked',
        checking: 'lock',
    },
    {
        name: 'maha ezzayer',
        number: 5665489892,
        description: 'lorem ipsum dolor sit amet, consecteur...',
        rate: 800.00,
        inr1: 'INR',
        balance: -400.00,
        inr2: 'INR',
        deposit: 600.00,
        inr3: 'INR',
        status: 'inactive',
        chexboxing: 'unchecked',
        checking: 'lock',

    },
    {
        name: 'hiba idrissi',
        number: 5665489893,
        description: 'lorem ipsum dolor sit amet, consecteur...',
        rate: 600.00,
        inr1: 'INR',
        balance: 100.00,
        inr2: 'INR',
        deposit: 300.00,
        inr3: 'INR',
        status: 'active',
        chexboxing: 'unchecked',
        checking: 'notLock',
    },
    {
        name: 'sara dahbi',
        number: 5665489894,
        description: 'lorem ipsum dolor sit amet, consecteur...',
        rate: 200.00,
        inr1: 'INR',
        balance: -700.00,
        inr2: 'INR',
        deposit: 100.00,
        inr3: 'INR',
        status: 'inactive',
        chexboxing: 'unchecked',
        checking: 'lock',
    },
    {

        name: 'alae idrissi',
        number: 5665489895,
        description: 'lorem ipsum dolor sit amet, consecteur...',
        rate: 200.00,
        inr1: 'INR',
        balance: 300.00,
        inr2: 'INR',
        deposit: 300.00,
        inr3: 'INR',
        status: 'active',
        chexboxing: 'unchecked',
        checking: 'lock',
    },
    {
        name: 'ilham janati',
        number: 5665489896,
        description: 'lorem ipsum dolor sit amet, consecteur...',
        rate: 900.00,
        inr1: 'INR',
        balance: "00.00",
        inr2: 'INR',
        deposit: 600.00,
        inr3: 'INR',
        status: 'active',
        chexboxing: 'unchecked',
        checking: 'notLock',

    },
    {
        name: 'mehdi benjloun',
        number: 5665489897,
        description: 'lorem ipsum dolor sit amet, consecteur...',
        rate: 400.00,
        inr1: 'INR',
        balance: -900.00,
        inr2: 'INR',
        deposit: 600.00,
        inr3: 'INR',
        status: 'active',
        chexboxing: 'unchecked',
        checking: 'notLock',

    },
    {
        name: 'mohamad attar',
        number: 5665489821,
        description: 'lorem ipsum dolor sit amet, consecteur...',
        rate: 200.00,
        inr1: 'INR',
        balance: 100.00,
        inr2: 'INR',
        deposit: 600.00,
        inr3: 'INR',
        status: 'inactive',
        chexboxing: 'unchecked',
        checking: 'notLock',
    },
    {
        name: 'ikram issaoui',
        number: 56654898456,
        description: 'lorem ipsum dolor sit amet, consecteur...',
        rate: 100.00,
        inr1: 'INR',
        balance: -400.00,
        inr2: 'INR',
        deposit: 700.00,
        inr3: 'INR',
        status: 'inactive',
        chexboxing: 'unchecked',
        checking: 'notLock',

    }, {
        name: 'alae ezayed',
        number: 5665489847,
        description: 'lorem ipsum dolor sit amet, consecteur...',
        rate: 700.00,
        inr1: 'INR',
        balance: 600.00,
        inr2: 'INR',
        deposit: 800.00,
        inr3: 'INR',
        status: 'active',
        chexboxing: 'unchecked',
        checking: 'notLock',
    }, {
        name: 'samir janati',
        number: 5665486564,
        description: 'lorem ipsum dolor sit amet, consecteur...',
        rate: 200.00,
        inr1: 'INR',
        balance: -900.00,
        inr2: 'INR',
        deposit: 8600.00,
        inr3: 'INR',
        status: 'active',
        chexboxing: 'unchecked',
        checking: 'lock',
    },
    {
        name: 'ismail hedad',
        number: 566548123,
        description: 'lorem ipsum dolor sit amet, consecteur...',
        rate: 700.00,
        inr1: 'INR',
        balance: 600.00,
        inr2: 'INR',
        deposit: 300.00,
        inr3: 'INR',
        status: 'active',
        chexboxing: 'unchecked',
        checking: 'lock',
    }, {
        name: 'ibrahim isaoui',
        number: 56632215,
        description: 'lorem ipsum dolor sit amet, consecteur...',
        rate: 600.00,
        inr1: 'INR',
        balance: 300.00,
        inr2: 'INR',
        deposit: 400.00,
        inr3: 'INR',
        status: 'active',
        chexboxing: 'unchecked',
        checking: 'lock',
    }, {
        name: 'iarim souiri',
        number: 565213288,
        description: 'lorem ipsum dolor sit amet, consecteur...',
        rate: 500.00,
        inr1: 'INR',
        balance: -6200.00,
        inr2: 'INR',
        deposit: 300.00,
        inr3: 'INR',
        status: 'inactive',
        chexboxing: 'unchecked',
        checking: 'notLock',
    }, {
        name: 'younes qabaj',
        number: 13516545664,
        description: 'lorem ipsum dolor sit amet, consecteur...',
        rate: 900.00,
        inr1: 'INR',
        balance: -200.00,
        inr2: 'INR',
        deposit: 400.00,
        inr3: 'INR',
        status: 'inactive',
        chexboxing: 'unchecked',
        checking: 'notLock',
    }, {
        name: 'firdaous qabaj',
        number: 53214569877,
        description: 'lorem ipsum dolor sit amet, consecteur...',
        rate: 200.00,
        inr1: 'INR',
        balance: 400.00,
        inr2: 'INR',
        deposit: 600.00,
        inr3: 'INR',
        status: 'active',
        chexboxing: 'unchecked',
        checking: 'notLock',
    }, {
        name: 'kadin herwitz',
        number: 599875347,
        description: 'lorem ipsum dolor sit amet, consecteur...',
        rate: 700.00,
        inr1: 'INR',
        balance: -600.00,
        inr2: 'INR',
        deposit: 800.00,
        inr3: 'INR',
        status: 'active',
        chexboxing: 'unchecked',
        checking: 'notLock',
    }, {
        name: 'abdlkrim houmidi',
        number: 588888847,
        description: 'lorem ipsum dolor sit amet, consecteur...',
        rate: 700.00,
        inr1: 'INR',
        balance: 600.00,
        inr2: 'INR',
        deposit: 800.00,
        inr3: 'INR',
        status: 'active',
        chexboxing: 'unchecked',
        checking: 'notLock',
    }, {
        name: 'mira dokiris',
        number: 563333337,
        description: 'lorem ipsum dolor sit amet, consecteur...',
        rate: 800.00,
        inr1: 'INR',
        balance: -100.00,
        inr2: 'INR',
        deposit: 200.00,
        inr3: 'INR',
        status: 'active',
        chexboxing: 'unchecked',
        checking: 'notLock',
    }, {
        name: 'carter Rosser',
        number: 565566677,
        description: 'lorem ipsum dolor sit amet, consecteur...',
        rate: 400.00,
        inr1: 'INR',
        balance: -300.00,
        inr2: 'INR',
        deposit: 900.00,
        inr3: 'INR',
        status: 'active',
        chexboxing: 'unchecked',
        checking: 'notLock',
    }, {
        name: 'sanae ramzi',
        number: 56523247,
        description: 'lorem ipsum dolor sit amet, consecteur...',
        rate: 700.00,
        inr1: 'INR',
        balance: 600.00,
        inr2: 'INR',
        deposit: 800.00,
        inr3: 'INR',
        status: 'active',
        checking: 'notLock',
        chexboxing: 'unchecked',
    },

];
let originTable = document.getElementById('theTable')
let table = document.getElementById("myTable");
let searchInput = document.getElementById("searchBar");
const sortingIdStatusElement = document.getElementById("sort-Status");
const activeClientsElement = document.getElementById("actived-clients");
const rowsElement = document.getElementById("select-rows");
const selectingRowsPerPage = document.getElementById("rows-per-page");
let previousPage = document.getElementById("previous-clients");
let nextPage = document.getElementById("next-clients");
let sortingIdNameClient = document.getElementById("sort-name");
let inputName = document.getElementById('name');
let inputNumber = document.getElementById('number');
let inputDescription = document.getElementById('description');
let labelInr1 = document.getElementById('currency-client');
let labelInr2 = document.getElementById('currency-client');
let labelInr3 = document.getElementById('currency-client');
let inputRate = document.getElementById('rate');
let inputBalance = document.getElementById('balance');
let inputDeposit = document.getElementById('deposit');
let labelStatus = document.getElementById('client-status');
let selectingCurrency = document.getElementById('currency-client');
let selectStatus = document.getElementById('client-status');
let btnSubmit = document.getElementById('add-btn');
let buttonCancel = document.getElementById('Exit-btn');
var inputsElements = document.querySelectorAll('.input');
let iconSumit = document.getElementById('iconeUser');
let rowsPerPage = 5;
let currentPage = 0;
let nameSort = "undefined";
let statusSort = "undefined";
const progressText = document.getElementById('text-progress');
const fillProgress = document.getElementById('fill-progress');
let btnupdate = document.getElementById('edit-btn');
let sortDefaultName = document.getElementById('default');
let sortAsc = document.getElementById('ascending');
let sortDsc = document.getElementById('descending');
let sortDefaultStatus = document.getElementById('default');
let sortAscStatus = document.getElementById('active');
let sortDscStatus = document.getElementById('inactive');
let iconVector = document.getElementById('iconeVector');
let iconPrint = document.getElementById('sept');
let printing = document.getElementById('print');
let iconcancelsort = document.getElementById('sortbyname');
let selectAll = document.getElementById('check-valid');
let unlocked = document.getElementById('iconeunlocked')
let locked = document.getElementById('iconelocked')
let btnDuplicate = document.getElementById('duplicate-btn')
let deleteAll = document.getElementById('icone-Delete')
let indexOfObject;
let pushIn
let arrayspecfic = []
let inds;
let freezeObj;
let arrayFrezzing = [];
let arraySelected = [];
let myArray1 = [];
let indexOfdouble;
var results;
var checkValidation;
let array = [];
var indexOfFirst;
let filterd;
getingData();

function creatingElement(client) {
    let row = document.createElement("tr");
    row.id = "trRow";
    row.className = "tr";
    let inputCheck = document.createElement("td");
    inputCheck.innerHTML = `<input   type = "checkbox" name= "checkboxes" class = "check-1" id="check-input" onclick = "checkUncheck(clients , ${client.number} , event) ">`
    row.append(inputCheck);

    let plus = document.createElement("td");
    row.appendChild(plus);
    let groupPlus = document.createElement("div");
    groupPlus.className = "plused";
    plus.appendChild(groupPlus);
    let spanPlused = document.createElement("span");
    spanPlused.className = "span-plused";
    spanPlused.innerHTML = '<img id = "iconeplused" class = "icon-plus" src = "plus.png" >';
    groupPlus.appendChild(spanPlused);
    groupPlus.onclick = () => {
        window.scrollTo(0, 0);
        addInPlace(clients, client.number);
        render(clients)
    }
    let name = document.createElement("td");
    name.className = "information-name";
    name.id = "information";
    row.append(name);
    let groupName = document.createElement("div");
    groupName.className = "groupe-1";
    name.append(groupName);
    let spanName = document.createElement("span");
    spanName.className = "name-A";
    spanName.textContent = client.name;
    groupName.append(spanName);
    let spanNumber = document.createElement("span");
    spanNumber.className = "number-A";
    spanNumber.textContent = client.number;
    groupName.appendChild(spanNumber);
    let description = document.createElement("td");
    row.appendChild(description);
    let groupDescription = document.createElement("div");
    groupDescription.className = "information-description";
    description.appendChild(groupDescription);
    let spanDescription = document.createElement("span");
    spanDescription.textContent = client.description;
    groupDescription.appendChild(spanDescription);
    let rate = document.createElement("td");
    row.appendChild(rate);
    let groupRate = document.createElement("div");
    groupRate.className = "group-2";
    rate.appendChild(groupRate);
    let spanFirstRate = document.createElement("span");
    spanFirstRate.className = "number";
    spanFirstRate.textContent = client.rate;
    groupRate.appendChild(spanFirstRate);
    let spanSecondRate = document.createElement("span");
    spanSecondRate.className = "inr";
    spanSecondRate.textContent = client.inr1;
    groupRate.appendChild(spanSecondRate);
    let balance = document.createElement("td");
    row.appendChild(balance);
    let groupBalance = document.createElement("div");
    groupBalance.className = "group-3";
    balance.appendChild(groupBalance);
    let spanFirstBalance = document.createElement("span");
    spanFirstBalance.className = "number";
    spanFirstBalance.textContent = client.balance;
    if (client.balance > 0) {
        spanFirstBalance.className = "green";
    }
    if (client.balance < 0) {
        spanFirstBalance.className = "red";
    }
    groupBalance.appendChild(spanFirstBalance);
    let spanSecondBalance = document.createElement("span");
    spanSecondBalance.className = "inr";
    spanSecondBalance.textContent = client.inr2;
    groupBalance.appendChild(spanSecondBalance);
    let deposit = document.createElement("td");
    row.appendChild(deposit);
    let groupDeposit = document.createElement("div");
    groupDeposit.className = "group-4";
    deposit.appendChild(groupDeposit);
    let spanFirstDeposit = document.createElement("span");
    spanFirstDeposit.className = "number";
    spanFirstDeposit.textContent = client.deposit;
    groupDeposit.appendChild(spanFirstDeposit);
    let spanSecondDeposit = document.createElement("span");
    spanSecondDeposit.className = "inr";
    spanSecondDeposit.textContent = client.inr3;
    groupDeposit.appendChild(spanSecondDeposit);
    //**************************************** */
    let status = document.createElement("td");
    row.appendChild(status);
    let groupStatus = document.createElement("div");
    groupStatus.className = "string";
    status.appendChild(groupStatus);
    let spanStatus = document.createElement("span");
    spanStatus.textContent = client.status;
    if (client.status === "active") {
        spanStatus.className = "active";
    }
    if (client.status === "inactive") {
        spanStatus.className = "inactive";
    }
    groupStatus.appendChild(spanStatus);

    //******************************* */*
    /*
    let lock = document.createElement("td");
    row.appendChild(lock);
    let groupLocked = document.createElement("div");
    groupLocked.className = "locked";
    lock.appendChild(groupLocked);
    let spanlock = document.createElement("span");
    spanlock.innerHTML = '<img id = "iconelocked" class = "icon-lock" src = "icons8-lock-64.png" >';
    if (client.checking === "lock") {
        spanlock.className = "show-icon";
    }
    if (client.checking === "notLock") {
        spanlock.className = "hidden-icon";
    }
    groupLocked.appendChild(spanlock);
    groupLocked.onclick = () => {

            /*freezeObj = clients.filter((client) => client.balance == 300 || client.balance == 600 || client.balance == 100)
            console.log(...freezeObj);
            Object.freeze(...freezeObj)
                //spanlock.style.display = "none"*/
    //********************************** */
    let poubelle = document.createElement("td");
    row.appendChild(poubelle);
    let groupdelete = document.createElement("div");
    groupdelete.className = "deleted";
    poubelle.appendChild(groupdelete);
    let spandelete = document.createElement("span");
    spandelete.className = "span-deleted";
    spandelete.innerHTML = '<img id = "iconeDelete" class = "iconDelete" src = "delete.poubelle.png" >';
    groupdelete.appendChild(spandelete);
    //**************************** /*
    spandelete.onclick = () => {
            clients = deleteClient(clients, client.number);
            localStorage.setItem('client', JSON.stringify(clients));
            render(clients);
        }
        //***************************** */
    let edit = document.createElement("td");
    row.appendChild(edit);
    let groupEdit = document.createElement("div");
    groupdelete.className = "edited";
    edit.appendChild(groupEdit);
    let spanEdit = document.createElement("span");
    spanEdit.className = "span-deleted";
    spanEdit.innerHTML = '<img id = "iconeEdit" class = "icon-Edit" src = "image.edit.png" >';
    groupEdit.appendChild(spanEdit);
    groupEdit.onclick = () => {
            array = [0, 1, 2, 3, 4, 5, 6, 7];
            progressBar()
            editClient(clients, client);
            window.scrollTo(0, 0);
            btnSubmit.style.display = "none";
            btnupdate.style.display = "block";
            btnDuplicate.style.display = "none"
        }
        //****************************************** */
    let duplicate = document.createElement("td");
    row.appendChild(duplicate);
    let groupdouble = document.createElement("div");
    groupdouble.className = "doubling";
    duplicate.appendChild(groupdouble);
    let spandouble = document.createElement("span");
    spandouble.className = "span-locked";
    spandouble.innerHTML = '<img id = "iconedouble" class = "icon-double" src = "duplicate_icon_124984.png" >';
    groupdouble.appendChild(spandouble);
    groupdouble.onclick = () => {
            array = [0, 1, 2, 3, 4, 5, 6, 7];
            progressBar();
            editClient(clients, client);
            addInPlace(clients, client.number);
            window.scrollTo(0, 0);
            btnSubmit.style.display = "none";
            btnupdate.style.display = "none";
            btnDuplicate.style.display = "block";

        }
        /*
            let unlock = document.createElement("td");
            row.appendChild(unlock);
            let groupunLocked = document.createElement("div");
            groupunLocked.className = "locked";
            lock.appendChild(groupunLocked);
            let spanunlock = document.createElement("span");
            spanunlock.className = "span-locked";
            spanunlock.innerHTML = '<img id = "iconeunlocked" class = "icon-unlock" src = "unlock-png-open-2000.png" >';
            groupunLocked.appendChild(spanunlock0);
            
            groupunLocked.onclick = () => {
                unlocked.style.display = "block"
                locked.style.display = "none"

            }
        */
    return row;
};


function render(clientsToRender) {
    table.innerHTML = "";
    const sortedClientsByName = sortByName(clientsToRender, nameSort);
    const sortedClientsByStatus = sortByStatus(sortedClientsByName, statusSort);
    const searchedClients = searchingClients(sortedClientsByStatus);
    const toRender = searchedClients.slice(currentPage * rowsPerPage, (currentPage + 1) * rowsPerPage);
    toRender.forEach((client) => {
        const row = creatingElement(client);
        table.append(row);
    });
    activeClientsElement.innerHTML = `active clients : ${countingActiveClients(searchedClients)} / ${searchedClients.length}`;
    rowsElement.innerHTML =
        `${currentPage * rowsPerPage + 1} - ${(currentPage + 1 ) * rowsPerPage } of ${searchedClients.length}`;

};
render(clients);



function checkUncheck(clientsselecting, clientToSelectd, event) {
    let filtring = clientsselecting.findIndex((client) => client.number == clientToSelectd);
    console.log(clientsselecting[filtring]);
    console.log(event.target.checked)
    if (event.target.checked === true) {
        clientsselecting[filtring]['chexboxing'] = 'checked';
    } else {
        clientsselecting[filtring]['chexboxing'] = 'unchecked';
        render(clientsselecting)
    }
    console.log(clientsselecting);
};


deleteAll.addEventListener('click', () => {
    clients.forEach(client => {
        if (client.chexboxing == 'checked') {
            let indexChex = clients.indexOf(client)
            clients.splice(indexChex, 1);
            render(clients)
            localStorage.setItem('client', JSON.stringify(clients));
        }
    })
})

selectAll.addEventListener('click', () => {
        clients.forEach(client => {
            if (selectAll.checked === true) {
                client.chexboxing == 'checked';
                render(clients)
            }
        })
    })
    /*
    function check() {
        if (document.getElementById("check-valid").checked = true) {

        }
    }

    printing.addEventListener('click', () => {

    })*/
















/*
let newArray = [];

function deleteClients(customerselecting, clientToDelete) {
    customerselecting.forEach((obj) => {
        if (obj.chexboxing = 'checked') {
            newArray.push(clientToDelete)
        } else if (obj.chexboxing = 'unchecked') {
            newArray.splice(clientToDelete, 1)
        }
    })

}

deleteAll.addEventListener('click', () => {
        newArray.forEach((customer) => {
            if (customer.chexboxing !== 'checked') {
                let i = newArray.indexOf(customer)
                clients.splice(i, 1)
            }
        })
        render(clients)
    })
    /*
    function clientsSelected(clientsSelecting, clientToSelectd) {
        filtring = clientsSelecting.filter((client) => client.number == clientToSelectd)
        console.log(...filtring)

        console.log(theArray)
        indexe = theArray.indexOf(...filtring)
        console.log(indexe)
    }
    deleteAll.addEventListener('click', () => {
            clientsSelected(clients, client.number)
            if (clients.number == theArray.number) {
                clients.splice(indexe, 1)
            }

            render(clients)
        })
     
        function selectingClient(clientsSelected, clientToSelected, clientcheckbox) {
            console.log(clientcheckbox)
            console.log(clientToSelected)
            console.log(clientsSelected)

        }*/



function doublicateClient(clientsDouble, clientTodoublicate) {
    indexOfdouble = clientsDouble.indexOf(clientTodoublicate);
    let copyOfClients = clients.slice();
    //let filterd = copyOfClients.filter((client) => client.number != clientToEdit.number);
    //console.log(filterd)
    clientsDouble.forEach((client) => {
        if (client.number === clientTodoublicate.number) {
            inputNameValue1 = document.getElementById('name').value = `${client.name}`;
            inputNumberValue1 = document.getElementById('number').value = `${client.number}`;
            inputDescriptionValue1 = document.getElementById('description').value = `${client.description}`;
            labelCurrencyValue1 = document.getElementById('currency-client').value = `${client.inr1}` || `${client.inr2}` || `${client.inr3}`;
            inputRateValue1 = document.getElementById('rate').value = `${client.rate}`;
            inputDepositValue1 = document.getElementById('deposit').value = `${client.deposit}`;
            inputBalanceValue1 = document.getElementById('balance').value = `${client.balance}`;
            labelStatusValue1 = document.getElementById('client-status').value = `${client.status}`;
        };
    });
};

function addInPlace(clientsOrg, clientspushIn) {
    pushIn = clientsOrg.filter((client) => client.number == clientspushIn);
    console.log(...pushIn)
    arrayspecfic.push(pushIn)
    inds = pushIn.indexOf(clientspushIn)
    if (clientsOrg.number == pushIn.number) {
        indexOfObject = clientsOrg.indexOf(...pushIn)
        console.log(indexOfObject)
    }
}
iconSumit.addEventListener('click', () => {
    setTimeout("hideNotification()", 3000);
    depositValidation();
    balanceValidation();
    rateValidation();
    currencyValidation();
    descriptionValidation();
    inputNumberValidation(array);
    statusValidation();
    inputNameValidation(array);
    addseceficPlace();
    window.scrollTo(50, 50);
    btnSubmit.style.display = "block";
    btnupdate.style.display = "none";
    render(clients);
});
btnDuplicate.addEventListener('click', () => {
    setTimeout("hideNotification()", 3000);
    addseceficPlace()
    render(clients);
})

function addseceficPlace() {
    results = Array.from(inputsElements);
    checkValidation = results.every((input) => {
        return input.nextElementSibling.textContent === "";
    })
    let newObjet = {}
    if (checkValidation) {
        newObjet.name = inputName.value;
        newObjet.number = inputNumber.value;
        newObjet.description = inputDescription.value;
        newObjet.rate = inputRate.value;
        newObjet.inr1 = labelInr1.value;
        newObjet.balance = inputBalance.value;
        newObjet.inr2 = labelInr2.value;
        newObjet.deposit = inputDeposit.value;
        newObjet.inr3 = labelInr3.value;
        newObjet.status = selectStatus.value;
        clients.splice(indexOfObject + 1, 0, newObjet)
        render(clients);
        localStorage.setItem('client', JSON.stringify(clients));
        results.forEach((input) => {
            input.value = "";
        })
        showAddHilight();
        array = [];
        showNotification();
        progressBar();
    }
}

searchInput.addEventListener('keyup', () => {
    render(clients);
});

selectingRowsPerPage.addEventListener('change', (event) => {
    rowsPerPage = event.target.value;
    render(clients);
});

previousPage.addEventListener('click', () => {
    currentPage = currentPage > 2 ? currentPage - 1 : 0;
    render(clients);
});

nextPage.addEventListener('click', () => {
    currentPage = `${(currentPage + 1 ) * rowsPerPage }` < 20 ? currentPage + 1 : 0;
    render(clients);
});

function searchingClients(clientsToSearch) {
    let searchValue = searchInput.value.toLowerCase();
    let filterdClients = clientsToSearch.filter((client) => {
        return (
            client.name.toLowerCase().includes(searchValue) || client.description.toLowerCase().includes(searchValue)
        );
    });
    return filterdClients;
};

function sortByStatus(clientsToSort, order) {
    let active = [];
    let inactive = [];
    clientsToSort.forEach((client) => {
        if (client.status == "active") {
            active.push(client);
        } else {
            inactive.push(client);
        }
    });
    if (order == "asc") {
        return active.concat(inactive);
    }
    if (order == "desc") {
        return inactive.concat(active);
    }
    return clientsToSort;
};

function sortByName(clientsToSort, orderName) {
    if (orderName === "az") {
        return (clientsToSort.sort((a, b) => {
            if (a.name < b.name) {
                return -1;
            }
            if (a.name > b.name) {
                return 1;
            }
            return 0;
        }));
    };
    if (orderName === "za") {
        return (clientsToSort.sort((a, b) => {
            if (a.name > b.name) {
                return -1;
            }
            if (a.name < b.name) {
                return 1;
            }
            return 0;
        }));
    };
    return clientsToSort;
};

function deleteClient(originClients, clientToDelete) {
    console.log(clientToDelete)
    f = originClients.filter((client) => client.number !== clientToDelete);
    console.log(f)
    return f;
};

function countingActiveClients(clientsToCount) {
    return clientsToCount.filter((client) => {
        return client.status === "active";
    }).length;
};

function addClients() {
    results = Array.from(inputsElements);
    checkValidation = results.every((input) => {
        return input.nextElementSibling.textContent === "";
    })
    let newObj = {}
    if (checkValidation) {
        newObj.name = inputName.value;
        newObj.number = inputNumber.value;
        newObj.description = inputDescription.value;
        newObj.rate = inputRate.value;
        newObj.inr1 = labelInr1.value;
        newObj.balance = inputBalance.value;
        newObj.inr2 = labelInr2.value;
        newObj.deposit = inputDeposit.value;
        newObj.inr3 = labelInr3.value;
        newObj.status = selectStatus.value;
        clients.unshift(newObj);
        render(clients);
        localStorage.setItem('client', JSON.stringify(clients));
        results.forEach((input) => {
            input.value = "";
        })
        showAddHilight()
        setTimeout('hideAddHilight()', 2000)
        array = [];
        showNotification();
        progressBar();
        hilight();
    }
};

btnSubmit.addEventListener('click', () => {
    showNotification()
    setTimeout("hideNotification()", 3000);
    depositValidation();
    balanceValidation();
    rateValidation();
    currencyValidation();
    descriptionValidation();
    inputNumberValidation(array);
    statusValidation();
    inputNameValidation(array);
    addClients();
    window.scrollTo(50, 50);
    btnSubmit.style.display = "block";
    btnupdate.style.display = "none";
    checkValidation = results.every((input) => {
        return input.nextElementSibling.textContent === "";
    })
});

function showAddHilight() {
    document.getElementById('trRow').style.backgroundColor = "#00ad03";
}

function hideAddHilight() {
    document.getElementById('trRow').style.backgroundColor = "";
}

inputName.addEventListener('input', () => {
    var inputNameValidation = function() {
        var existingName = false;
        inputNameValue = inputName.value.trim();
        clients.forEach((client) => {
            if (client.name === inputNameValue) {
                existingName = true;
            }
        })
        nameErr = document.getElementById('name-erreur');
        if (inputNameValue === "") {
            nameErr.innerHTML = "Client name is required";
        } else if (inputNameValue.match("[^a-z A-Z]")) {
            nameErr.innerHTML = "client name should be string ";
        } else if (existingName) {
            nameErr.innerHTML = "client name already exists ";
        } else {
            nameErr.innerHTML = "";
        };
    };
    inputNameValidation();
    progressingInputs(0);


});
inputNumber.addEventListener('input', () => {
    var inputNumberValidation = function() {
        existingNumber = false;
        inputNumberValue = inputNumber.value.trim();
        numberErr = document.getElementById('number-erreur')
        clients.forEach((client) => {
            if (client.number == inputNumberValue) {
                existingNumber = true;
            };
        });
        if (existingNumber) {
            numberErr.innerHTML = "client number already exists";
        } else if (inputNumberValue == "") {
            numberErr.innerHTML = "Client Number is required";
        } else if (inputNumberValue.length != 10) {
            numberErr.innerHTML = "Client Number should be 10 digits";
        } else if (inputNumberValue.length = 10) {
            numberErr.innerHTML = "";
        };
    };
    inputNumberValidation();
    progressingInputs(1);
});
inputDescription.addEventListener('input', () => {
    var descriptionValidationChange = function() {
        inputDescriptionValue = inputDescription.value.trim();
        descriptionErr = document.getElementById('description-erreur');
        if (inputDescriptionValue == "") {
            descriptionErr.innerHTML = "Description is required";
        } else if (inputDescriptionValue.length < 10) {
            descriptionErr.innerHTML = "Description should at least have 10 characters";
        } else if (inputDescriptionValue.length >= 10) {
            descriptionErr.innerHTML = "";
        };
    };
    descriptionValidationChange();
    progressingInputs(2);
});
selectingCurrency.addEventListener('input', () => {
    var currencyValidation = function() {
        labelCurrencyValue1 = selectingCurrency.value;
        currencyErr = document.getElementById('currency-erreur');
        if (labelCurrencyValue1 === "") {
            currencyErr.innerHTML = "currency is required"
        } else {
            currencyErr.innerHTML = "";
        };
    };
    currencyValidation();
    progressingInputs(3);
});
selectingCurrency.addEventListener('blur', () => {
    var currencyValidation = function() {
        labelCurrencyValue1 = selectingCurrency.value;
        currencyErr = document.getElementById('currency-erreur');
        if (labelCurrencyValue1 === "") {
            currencyErr.innerHTML = "currency is required"
        } else {
            currencyErr.innerHTML = "";
        };
    };
    currencyValidation();
    progressingInputs(3);
});
inputRate.addEventListener('input', () => {
    var rateValidation = function() {
        inputRateValue = inputRate.value.trim();
        rateErr = document.getElementById('rate-erreur');
        if (inputRateValue == "") {
            rateErr.innerHTML = "Rate id Required";
        } else {
            rateErr.innerHTML = "";
        };
    };
    rateValidation();
    progressingInputs(4);
});
inputBalance.addEventListener('input', () => {
    var balanceValidation = function() {
        inputBalanceValue = inputBalance.value.trim();
        balanceErr = document.getElementById('balance-erreur');
        if (inputBalanceValue == "") {
            balanceErr.innerHTML = "Balance is Required"
        } else {
            balanceErr.innerHTML = "";
        };
    };
    balanceValidation();
    progressingInputs(5);
});
inputDeposit.addEventListener('input', () => {
    var depositValidation = function() {
        inputDepositValue = inputDeposit.value;
        depositErr = document.getElementById('deposit-erreur');
        if (inputDepositValue == "") {
            depositErr.innerHTML = "Deposit is required";
        } else {
            depositErr.innerHTML = "";
        };
    };
    depositValidation();
    progressingInputs(6);
});
selectStatus.addEventListener('input', () => {
    var statusValidation = function() {
        labelStatusValue = selectStatus.value;
        statusErr = document.getElementById('status-erreur');
        if (labelStatusValue === "") {
            statusErr.innerHTML = "Status is required";
        } else {
            statusErr.innerHTML = "";
        };
    };
    statusValidation();
    progressingInputs(7);

});
selectStatus.addEventListener('blur', () => {
    var statusValidation = function() {
        labelStatusValue = selectStatus.value;
        statusErr = document.getElementById('status-erreur');
        if (labelStatusValue === "") {
            statusErr.innerHTML = "Status is required";
        } else {
            statusErr.innerHTML = "";
        };
    };
    statusValidation();
    progressingInputs(7);

});

function hilight(index) {
    let allRows = document.querySelectorAll('.tr');
    allRows[index].classList.add('hilightRow');
    setTimeout(function() {
        allRows[index].classList.remove('hilightRow');
    }, 3000);
};

function showNotification() {
    document.getElementById('table-notification').style.visibility = 'visible';
};

function hideNotification() {
    document.getElementById('table-notification').style.visibility = 'hidden';
    render(clients)
};

function showUpdateNotification() {
    document.getElementById('update-notification').style.visibility = 'visible';
};

function hideUpdateNotification() {
    document.getElementById('update-notification').style.visibility = 'hidden';
};
hideUpdateNotification();
hideNotification();

function progressingInputs(index) {
    let checkprogress;
    if (inputsElements[index].nextElementSibling.innerHTML === "") {
        checkprogress = true;
    }
    if (checkprogress === true) {
        if (!array.includes(index)) {
            array.push(index)
        }
    } else {
        array.splice(index, 1);
    }
    progressBar();
};

function progressBar() {
    var storingProgress = (100 / 8) * array.length;
    fillProgress.style.width = `${storingProgress}% `;
    progressText.textContent = `${storingProgress}% `;
};

function getingData() {
    if (localStorage.getItem('client') !== null) {
        clients = JSON.parse(localStorage.getItem('client'));
    };
};

var inputNumberValidation = function(array = filterd) {
    var existingNumber = false;
    inputNumberValue = inputNumber.value;
    numberErr = document.getElementById('number-erreur');
    array.forEach((client) => {
        if (client.number == inputNumberValue) {
            existingNumber = true;
        }
    })
    if (existingNumber) {
        numberErr.innerHTML = "client number already exists"
    } else if (inputNumberValue == "") {
        numberErr.innerHTML = "Client Number is required";
    } else if (inputNumberValue.length != 10) {
        numberErr.innerHTML = "Client Number should be 10 digits";
    } else if (inputNumberValue.length = 10) {
        numberErr.innerHTML = "";
    };
};
var inputNameValidation = function(array = filterd) {
    var existingName = false;
    inputNameValue = inputName.value;
    array.forEach((client) => {
        if (client.name === inputNameValue) {
            existingName = true;
        }
    })
    nameErr = document.getElementById('name-erreur');
    if (inputNameValue === "") {
        nameErr.innerHTML = "Client name is required";
    } else if (inputNameValue.match("[^a-z A-Z]")) {
        nameErr.innerHTML = "client name should be string ";
    } else if (existingName) {
        nameErr.innerHTML = "client name already exists ";
    } else {
        nameErr.innerHTML = "";
    };
};
var depositValidation = function() {
    inputDepositValue = inputDeposit.value;
    depositErr = document.getElementById('deposit-erreur');
    if (inputDepositValue == "") {
        depositErr.innerHTML = "Deposit is required";
    } else {
        depositErr.innerHTML = "";
    };
}
var balanceValidation = function() {
    inputBalanceValue = inputBalance.value;
    balanceErr = document.getElementById('balance-erreur');
    if (inputBalanceValue == "") {
        balanceErr.innerHTML = "Balance is Required"
    } else {
        balanceErr.innerHTML = "";
    };
};
var rateValidation = function() {
    inputRateValue = inputRate.value;
    rateErr = document.getElementById('rate-erreur');
    if (inputRateValue == "") {
        rateErr.innerHTML = "Rate id Required";
    } else {
        rateErr.innerHTML = "";
    };
};
var currencyValidation = function() {
    labelCurrencyValue1 = selectingCurrency.value;
    currencyErr = document.getElementById('currency-erreur');
    if (labelCurrencyValue1 === "") {
        currencyErr.innerHTML = "currency is required"
    } else {
        currencyErr.innerHTML = "";
    };
};
var statusValidation = function() {
    labelStatusValue = selectStatus.value;
    statusErr = document.getElementById('status-erreur');
    if (labelStatusValue === "") {
        statusErr.innerHTML = "Status is required";
    } else {
        statusErr.innerHTML = "";
    };
};
var descriptionValidation = function() {
    inputDescriptionValue = inputDescription.value;
    descriptionErr = document.getElementById('description-erreur');
    if (inputDescriptionValue == "") {
        descriptionErr.innerHTML = "Description is required";
    } else if (inputDescriptionValue.length < 10) {
        descriptionErr.innerHTML = "Description should at least have 10 characters";
    } else if (inputDescriptionValue.length >= 10) {
        descriptionErr.innerHTML = "";
    }
}

function editClient(myOriginClients, clientToEdit) {
    indexOfFirst = myOriginClients.indexOf(clientToEdit);
    let copyOfClients = clients.slice();
    filterd = copyOfClients.filter((client) => client.number != clientToEdit.number);
    myOriginClients.forEach((client) => {
        if (client.number === clientToEdit.number) {
            inputNameValue = document.getElementById('name').value = `${client.name}`;
            inputNumberValue = document.getElementById('number').value = `${client.number}`;
            inputDescriptionValue = document.getElementById('description').value = `${client.description}`;
            labelCurrencyValue1 = document.getElementById('currency-client').value = `${client.inr1}` || `${client.inr2}` || `${client.inr3}`;
            inputRateValue = document.getElementById('rate').value = `${client.rate}`;
            inputDepositValue = document.getElementById('deposit').value = `${client.deposit}`;
            inputBalanceValue = document.getElementById('balance').value = `${client.balance}`;
            labelStatusValue = document.getElementById('client-status').value = `${client.status}`;
        };
        depositValidation();
        balanceValidation();
        rateValidation();
        currencyValidation();
        descriptionValidation();
        inputNumberValidation(array);
        statusValidation();
        inputNameValidation(array);
    });
};

btnupdate.addEventListener('click', () => {
    progressBar();
    var results = Array.from(inputsElements);
    var checkValidation = results.every((input) => {
        return input.nextElementSibling.textContent === "";
    })
    let newObj = {};
    if (checkValidation) {
        newObj.name = inputName.value;
        newObj.number = inputNumber.value;
        newObj.description = inputDescription.value;
        newObj.rate = inputRate.value;
        newObj.inr1 = labelInr1.value;
        newObj.balance = inputBalance.value;
        newObj.inr2 = labelInr2.value;
        newObj.deposit = inputDeposit.value;
        newObj.inr3 = labelInr3.value;
        newObj.status = selectStatus.value;
        clients.splice(indexOfFirst, 1, newObj);
        console.log(clients)
        array = [];
        progressBar();
        results.forEach((input) => {
            input.value = "";
        })
        checkValidation = results.every((input) => {
            return input.nextElementSibling.textContent === "";
        })
        render(clients);
        //console.log(indexOfFirst);
        hilight(indexOfFirst);
        localStorage.setItem('client', JSON.stringify(clients));
        setTimeout("hideColor()", 2000);
        showUpdateNotification();
        setTimeout('showUpdateNotification()', 1000);
        setTimeout('hideUpdateNotification()', 3000);
        hideNotification();
        btnSubmit.style.display = "block";
        btnupdate.style.display = "none";
        window.scrollTo(50, 50);
        results.forEach((input) => {
            input.value = "";
        })

    }
});

buttonCancel.addEventListener('click', () => {
    inputsElements.forEach(input => input.value = "")
    array = [];
    btnSubmit.style.display = "block"
    btnupdate.style.display = "none"
    btnDuplicate.style.display = "none"
    progressBar()
});

iconVector.addEventListener('click', () => {
    document.getElementById('sorting-rectangle').style.visibility = 'visible';
})

originTable.addEventListener('click', () => {
    document.getElementById('sorting-rectangle').style.visibility = 'hidden';
});
let defaulting = document.getElementById('default')
defaulting.addEventListener('click', () => {
    if (nameSort === "za" || nameSort === "az") {
        nameSort = "undefined";
    }

    render(clients);

});
let asc = document.getElementById('ascending');
asc.addEventListener('click', () => {
    if (nameSort === "undefined" || nameSort === "za") {
        nameSort = "az";
    }
    render(clients);

});
let desc = document.getElementById('descending');

desc.addEventListener('click', () => {
    if (nameSort === "az" || nameSort === "undefined") {
        nameSort = "za";
    }
    render(clients);
});
let sortdefault = document.getElementById('defaulted');
sortdefault.addEventListener('click', () => {
    if (statusSort === "desc" || statusSort === "asc") {
        statusSort = "undefined";
    }
    render(clients)

});
let sortactive = document.getElementById('actived');
sortactive.addEventListener('click', () => {
    if (statusSort === "undefined" || statusSort === "desc") {
        statusSort = 'asc';
    }
    render(clients)

});
sortInactive = document.getElementById('inactived');
sortInactive.addEventListener('click', () => {
        if (statusSort === 'asc' || statusSort === "undefined") {
            statusSort = 'desc';
        }
        render(clients)
    })
    /*
                sortingIdStatusElement.addEventListener('click', () => {
                    if (statusSort === "undefined") {
                        statusSort = 'asc';
                    } else if (statusSort === 'asc') {
                        statusSort = 'desc';
                    } else {
                        statusSort = "undefined";
                    }
                    render(clients);
                });

                sortingIdNameClient.addEventListener('click', () => {
                    if (nameSort === "undefined") {
                        nameSort = "az";
                    } else if (nameSort === "az") {
                        nameSort = "za";
                    } else if (nameSort === "za") {
                        nameSort = "undefined";
                    }
                    render(clients);
                });
            */